# UniversalDictionary
Study project

# Spring boot, Hibernate, PostgreSQL REST API

Spring boot application for working with universal directories.
 Creating new directories with their own structure, filling with data and searching for any number of fields.

# Steps to install
1) Clone the application 
 ```
https://github.com/AntonKolchunov/UniversalDictionary.git
```
2) Create PostgreSQL scheme
 ```
CREATE SCHEMA IF NOT EXISTS testtask
    AUTHORIZATION postgres;
``` 
3) Create tables
```
CREATE TABLE IF NOT EXISTS testtask.dictionary_table
(
    id bigint NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    name text COLLATE pg_catalog."default" NOT NULL,
    code text COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT dictionary_table_pkey PRIMARY KEY (id)
)

CREATE TABLE IF NOT EXISTS testtask.structure_dictionary_table
(
    id bigint NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    id_dictionary bigint NOT NULL,
    name text COLLATE pg_catalog."default" NOT NULL,
    data_type text COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT structure_dictionary_table_pkey PRIMARY KEY (id),
    CONSTRAINT structure_table_values_fkey FOREIGN KEY (id_dictionary)
        REFERENCES testtask.dictionary_table (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID
)

CREATE TABLE IF NOT EXISTS testtask.row_values_table
(
    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    id_dict bigint NOT NULL,
    CONSTRAINT structure_table_values_pkey PRIMARY KEY (id),
    CONSTRAINT structure_table_values_fkey FOREIGN KEY (id_dict)
        REFERENCES testtask.dictionary_table (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID
)

CREATE TABLE IF NOT EXISTS testtask.values_table
(
    id bigint NOT NULL GENERATED ALWAYS AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    id_row bigint NOT NULL,
    id_field bigint NOT NULL,
    value text COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT table_values_pkey PRIMARY KEY (id),
    CONSTRAINT row_table_fk FOREIGN KEY (id_row)
        REFERENCES testtask.row_values_table (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID,
    CONSTRAINT structure_dictionary_table_fk FOREIGN KEY (id_field)
        REFERENCES testtask.structure_dictionary_table (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
        NOT VALID
)
```
4) Change PostgreSQL Username and Password as per your PostgreSQL Installation
  * open src/main/resources/application.properties file.
  * change spring.datasource.username and spring.datasource.password as per your installation

# Explore Rest APIs

The app defines following CRUD APIs.
```
GET /api/v1/dictionary/{id}

POST /api/v1/dictionary/

DELETE /api/v1/dictionary/{id}

GET /api/v1/tablevalues/{search}

POST /api/v1/tablevalues/

DELETE /api/v1/tablevalues/{id}
```
You can test them using postman or any other rest client.
